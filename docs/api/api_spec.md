# API仕様

## 概要

このAPIは、以下の2つのコンポーネントで構成されています。

- **Goサーバー（localhost:8080）**  
  フロントエンドからのリクエストを受け取り、PythonサーバーやDBと連携してレスポンスを返す。
- **Pythonサーバー（localhost:8000）**  
  表情分析・ロゴ分析といったAI処理を担当。


### 補足構成情報

- **画像分析処理：** GoサーバーがPythonサーバーへ画像を転送し、結果を取得する。
- **DB処理：** Goサーバーがログやユーザー情報をDBに保存。
- **S3とのやり取り：** フロントエンドが直接S3に画像をアップロード／取得。

---

## GoサーバーAPI仕様
- localhost:8080で起動します。

### APIエンドポイント一覧
| メソッド | エンドポイント                  | 説明                                  | リクエストボディの例 | 　レスポンスボディの例                        |
|--------|--------------------------|-------------------------------------|------------------|------------------------------------|
| POST   | `/api/analyze/face`      | 表情分析を行うために画像を送信し、リコメンドアイスを返すエンドポイント | `{"image": "base64_encoded_image"}` | `{"ice": "アイスの名前", "emotion": "感情"}` |
| POST   | `/api/analyze/logo`      | 自販機のロゴを分析するために画像を送信し分析結果を返すエンドポイント  | `{"image": "base64_encoded_image"}` | `{"result": "分析結果"}` |
| PATCH  | `/api/recommend`         | リコメンドアイスを取得し、位置情報を更新するためのエンドポイント    | `{"location": "位置情報"}` | `{"status": "success"}` |
| GET    | `/api/recommend/:id`     | リコメンドアイスの詳細情報を取得するためのエンドポイント        | `{}`         | `{"ice": "アイスの名前", "details": "詳細情報"}` |
| GET    | `/api/recommend/history` | リコメンド履歴を取得するためのエンドポイント              | | `{}`         | `[{"ice": "アイスの名前", "timestamp": "タイムスタンプ"}]` |


## PythonAPI仕様
- localhost:8000で起動します。

### APIエンドポイント一覧
| メソッド | エンドポイント                  | 説明                               |
|--------|--------------------------|----------------------------------|
| POST   | `/api/analyze/face`      | 表情分析を行い、感情を返すエンドポイント         |
| POST   | `/api/analyze/logo`      | 自販機のロゴを分析し、分析結果を返すエンドポイント  |
